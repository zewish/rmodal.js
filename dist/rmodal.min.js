!function(o,t){"use strict";function s(o,t){return Object.prototype.toString.call(o).toLowerCase()==="[object "+t+"]"}function i(o,t){var s=o.className.split(/\s+/);s[0]||(s=[]),s.indexOf(t)>-1||(s.push(t),o.className=s.join(" "))}function e(o,t){var s=o.className.split(/\s+/),i=s.indexOf(t);i>-1&&s.splice(i,1),o.className=s.join(" ")}function n(o,t){this.opened=!1,this.options=t||{},this.options.bodyClass=this.options.bodyClass||"modal-open",this.options.dialogClass=this.options.dialogClass||"modal-dialog",this.options.dialogOpenClass=this.options.dialogOpenClass||"bounceInDown",this.options.dialogCloseClass=this.options.dialogCloseClass||"bounceOutUp",void 0===this.options.escapeClose&&(this.options.escapeClose=!0),this.options.focusElements=this.options.elements||["a[href]","area[href]","input:not([disabled]):not([type=hidden])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"],void 0===this.options.focus&&(this.options.focus=!0),this.focusOutElement=null,this.overlay=o,this.dialog=o.querySelector("."+this.options.dialogClass),void 0!==this.options.content&&this.content(this.options.content)}var l=n.prototype;l.open=function(o){var t=this;return this.content(o),s(this.options.beforeOpen,"function")?this.options.beforeOpen(function(){t._doOpen()}):void this._doOpen()},l._doOpen=function(){i(t.body,this.options.bodyClass),e(this.dialog,this.options.dialogCloseClass),i(this.dialog,this.options.dialogOpenClass),this.overlay.style.display="block",this.options.focus&&(this.focusOutElement=t.activeElement,this.focus()),s(this.options.afterOpen,"function")&&this.options.afterOpen(),this.opened=!0},l.close=function(){var o=this;return s(this.options.beforeClose,"function")?this.options.beforeClose(function(){o._doClose()}):void this._doClose()},l._doClose=function(){var o=this;e(this.dialog,this.options.dialogOpenClass),i(this.dialog,this.options.dialogCloseClass),e(t.body,this.options.bodyClass),this.options.focus&&this.focus(this.focusOutElement),s(this.options.afterClose,"function")&&this.options.afterClose(),this.opened=!1,setTimeout(function(){o.overlay.style.display="none"},500)},l.content=function(o){return void 0===o?this.dialog.innerHTML:void(this.dialog.innerHTML=o)},l.elements=function(t,s){return s=s||o.navigator.appVersion.indexOf("MSIE 9.0")>-1,[].filter.call(this._elementsAll(t),function(t){if(s){var i=o.getComputedStyle(t);return"none"!==i.display&&"hidden"!==i.visibility}return null!==t.offsetParent})},l._elementsAll=function(o){return s(o,"array")&&(o=o.join(",")||null),this.dialog.querySelectorAll(o)},l.focus=function(o){o=o||this.elements(this.options.focusElements)[0]||this.dialog.firstChild,o&&s(o.focus,"function")&&o.focus()},l.keydown=function(o){function t(){o.preventDefault(),o.stopPropagation()}if(this.options.escapeClose&&27==o.which&&this.close(),this.opened&&9==o.which&&this.dialog.contains(o.target)){var s=this.elements(this.options.focusElements),i=s[0],e=s[s.length-1];i==e?t():o.target==i&&o.shiftKey?(t(),e.focus()):o.target!=e||o.shiftKey||(t(),i.focus())}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return n}):"object"==typeof module&&module.exports?module.exports=n:o.RModal=n}(window,document);